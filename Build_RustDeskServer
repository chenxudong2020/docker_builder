
FROM alpine:latest



ADD rustdesk /usr/local/rustdesk

RUN  sed -i 's/dl-cdn.alpinelinux.org/mirrors.tuna.tsinghua.edu.cn/g' /etc/apk/repositories && \
     apk update && \
     apk add --no-cache bash psmisc && \
     rm -rf /var/cache/apk/* && \
     cd /usr/local/rustdesk && \ 
     chmod +x hbbs hbbr rustdesk-utils runhbb rustdeskweb apiserver

     

EXPOSE 21114
EXPOSE 21115
EXPOSE 21116
EXPOSE 21117
EXPOSE 21118
EXPOSE 21119
EXPOSE 21116/udp


ENV KEY=rustdeskkey


ENTRYPOINT /usr/local/rustdesk/runhbb $KEY false
