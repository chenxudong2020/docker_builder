
FROM ubuntu:20.04
ADD rustdesk /usr/local/rustdesk

RUN  echo "deb http://th.archive.ubuntu.com/ubuntu jammy main" >> /etc/apt/sources.list && \
     apt-get update && \
     apt-get install -y psmisc && \
     cd /usr/local/rustdesk && \ 
     chmod +x hbbs hbbr rustdesk-utils runhbb rustdeskweb apiserver && \
     rm -rf /app/server/server.sh && \
     mv /usr/local/rustdesk/rustdeskweb /app/server/

EXPOSE 21114
EXPOSE 21115
EXPOSE 21116
EXPOSE 21117
EXPOSE 21118
EXPOSE 21119
EXPOSE 21116/udp


ENV KEY=rustdeskkey
ENV ENABLE_WEB_CLIENT false

ENTRYPOINT /usr/local/rustdesk/runhbb $KEY $ENABLE_WEB_CLIENT
